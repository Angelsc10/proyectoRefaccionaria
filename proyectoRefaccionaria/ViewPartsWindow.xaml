<winuiEx:WindowEx
    x:Class="proyectoRefaccionaria.ViewPartsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:winuiEx="using:WinUIEx"
    xmlns:local="using:proyectoRefaccionaria"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    Title="Refaccionaria El Gallito - Inventario"
    Width="900" Height="600">

    <Grid Padding="20" Background="{StaticResource BackgroundColorSuperDark}">
        <StackPanel Spacing="10">
            <TextBlock Text="Gestión de refacciones"
                       FontSize="22" FontWeight="Bold" 
                       Foreground="{StaticResource PrimaryColor}"/>

            <StackPanel Orientation="Horizontal" Spacing="10" 
                        Background="{StaticResource BackgroundColorDark}"
                        Padding="10" CornerRadius="8">

                <TextBox x:Name="FiltroNombre" PlaceholderText="Buscar por nombre..." Width="200"
                         Foreground="{StaticResource TextControlForeground}"
                         BorderBrush="{StaticResource PrimaryColor}"
                         Background="{StaticResource BackgroundColorLight}"/>
                <TextBox x:Name="FiltroPrecio" PlaceholderText="Precio máximo..." Width="150"
                         Foreground="{StaticResource TextControlForeground}"
                         BorderBrush="{StaticResource PrimaryColor}"
                         Background="{StaticResource BackgroundColorLight}"/>

                <ComboBox x:Name="CategoriaFilterComboBox"
                          PlaceholderText="Filtrar por categoría"
                          Width="180"
                          SelectionChanged="Filtrar_Click"
                          Foreground="{StaticResource TextColorOnAccent}"
                          Background="{StaticResource BackgroundColorDark}"
                          BorderBrush="{StaticResource BackgroundColorDark}"/>

                <Button x:Name="FiltrarButton" Click="Filtrar_Click"
                        Style="{StaticResource DefaultButtonStyle}"
                        Background="{StaticResource BackgroundColorDark}"
                        Foreground="{StaticResource TextColorOnAccent}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <SymbolIcon Symbol="Filter"/>
                        <TextBlock Text="Filtrar"/>
                    </StackPanel>
                </Button>

                <Button x:Name="MostrarTodoButton" Click="MostrarTodo_Click"
                        Style="{StaticResource DefaultButtonStyle}"
                        Background="{StaticResource BackgroundColorDark}"
                        Foreground="{StaticResource TextColorOnAccent}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <SymbolIcon Symbol="Clear"/>
                        <TextBlock Text="Mostrar todo"/>
                    </StackPanel>
                </Button>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,10,0,0">
                <Button x:Name="EditarButton"
                        Click="Editar_Click"
                        Width="250"
                        Style="{StaticResource AccentButtonStyle}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <SymbolIcon Symbol="Edit"/>
                        <TextBlock Text="Editar refacción seleccionada"/>
                    </StackPanel>
                </Button>

                <Button x:Name="EliminarButton"
                        Click="Eliminar_Click"
                        Width="250"
                        Background="{StaticResource DangerColor}"
                        Foreground="{StaticResource TextColorOnAccent}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <SymbolIcon Symbol="Delete"/>
                        <TextBlock Text="Eliminar refacción seleccionada"/>
                    </StackPanel>
                </Button>
            </StackPanel>

            <controls:DataGrid x:Name="PartsDataGrid"
                               Height="350"
                               Margin="0,10,0,0"
                               AutoGenerateColumns="False"
                               IsReadOnly="True"
                               SelectionMode="Single"
                               CanUserSortColumns="True"
                               Background="{StaticResource BackgroundColorDark}"
                               Foreground="{StaticResource TextColorOnAccent}">
                <controls:DataGrid.Columns>
                    <controls:DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                    <controls:DataGridTextColumn Header="Nombre" Binding="{Binding Nombre}" Width="*"/>
                    <controls:DataGridTextColumn Header="Categoría" Binding="{Binding Categoria}" Width="150"/>
                    <controls:DataGridTextColumn Header="Precio" Binding="{Binding Precio}" Width="100"/>
                    <controls:DataGridTemplateColumn Header="Stock" Width="100">
                        <controls:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Stock}" 
                                           VerticalAlignment="Center"
                                           FontWeight="Bold"
                                           Foreground="{Binding Stock, Converter={StaticResource StockToColorConverter}}"/>
                            </DataTemplate>
                        </controls:DataGridTemplateColumn.CellTemplate>
                    </controls:DataGridTemplateColumn>
                </controls:DataGrid.Columns>
            </controls:DataGrid>

        </StackPanel>
    </Grid>
</winuiEx:WindowEx>