<winuiEx:WindowEx
    x:Class="proyectoRefaccionaria.UserManagementWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:winuiEx="using:WinUIEx"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    mc:Ignorable="d"
    Title="Refaccionaria El Gallito - Usuarios"
    Width="900" Height="500">

    <Grid Padding="20" Background="{StaticResource BackgroundColorSuperDark}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="350"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0" Spacing="10" Margin="0,0,10,0">
            <TextBlock Text="Usuarios Existentes" FontSize="22" FontWeight="Bold"
                       Foreground="{StaticResource PrimaryColor}"/>

            <controls:DataGrid x:Name="UsuariosDataGrid"
                               Height="350"
                               AutoGenerateColumns="False"
                               IsReadOnly="True"
                               SelectionMode="Single"
                               CanUserSortColumns="True"
                               Background="{StaticResource BackgroundColorDark}"
                               Foreground="{StaticResource TextColorOnAccent}">
                <controls:DataGrid.Columns>
                    <controls:DataGridTextColumn Header="ID" Binding="{Binding UsuarioID}" Width="50"/>
                    <controls:DataGridTextColumn Header="Username" Binding="{Binding Username}" Width="*"/>
                    <controls:DataGridTextColumn Header="Rol" Binding="{Binding Rol}" Width="100"/>
                </controls:DataGrid.Columns>
            </controls:DataGrid>

            <Button x:Name="EliminarButton"
                    Click="EliminarUsuario_Click"
                    HorizontalAlignment="Right"
                    Background="{StaticResource DangerColor}"
                    Foreground="{StaticResource TextColorOnAccent}"
                    Width="200">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <SymbolIcon Symbol="Delete"/>
                    <TextBlock Text="Eliminar Seleccionado"/>
                </StackPanel>
            </Button>

        </StackPanel>

        <Border Grid.Column="1" 
                Background="{StaticResource BackgroundColorDark}"
                Padding="15" CornerRadius="8" Margin="10,0,0,0">

            <StackPanel Spacing="10">
                <TextBlock Text="Añadir Nuevo Usuario" FontSize="22" FontWeight="Bold"
                           Foreground="{StaticResource TextColorOnAccent}"/>

                <TextBox x:Name="UsernameTextBox"
                         Header="Nuevo Username:"
                         PlaceholderText="Ej. juanperez"
                         Foreground="{StaticResource TextControlForeground}"
                         BorderBrush="{StaticResource PrimaryColor}"
                         Background="{StaticResource BackgroundColorLight}"/>

                <PasswordBox x:Name="PasswordBox"
                             Header="Contraseña:"
                             PlaceholderText="•••••"
                             Foreground="{StaticResource TextControlForeground}"
                             BorderBrush="{StaticResource PrimaryColor}"
                             Background="{StaticResource BackgroundColorLight}"/>

                <ComboBox x:Name="RolComboBox"
                          Header="Rol:"
                          PlaceholderText="Selecciona un rol"
                          Width="Auto"
                          Foreground="{StaticResource TextColorOnAccent}"
                          Background="{StaticResource BackgroundColorDark}"
                          BorderBrush="{StaticResource BackgroundColorDark}">
                    <x:String>admin</x:String>
                    <x:String>usuario</x:String>
                </ComboBox>
                <Button x:Name="AgregarButton"
                        Click="AgregarUsuario_Click"
                        Style="{StaticResource AccentButtonStyle}"
                        HorizontalAlignment="Stretch"
                        Background="{StaticResource SuccessColor}"  BorderBrush="{StaticResource SuccessColor}" Margin="0,20,0,0">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <SymbolIcon Symbol="AddFriend"/>
                        <TextBlock Text="Crear Usuario"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Border>
    </Grid>
</winuiEx:WindowEx>